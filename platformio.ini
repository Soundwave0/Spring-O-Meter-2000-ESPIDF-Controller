; ──────────────────────────────────────────────────────────────
; PlatformIO Configuration – ESP32 + 2.8" TFT + LVGL + TMC2208
; Works on Ubuntu 24.04+ (Snap VS Code + pipx)
; ──────────────────────────────────────────────────────────────

[platformio]
default_envs = tft28

; ──────────────────────────────────────────────────────────────
; Global Settings
; ──────────────────────────────────────────────────────────────
[env]
platform = espressif32@6.5.0
framework = espidf
monitor_speed = 115200
upload_speed = 921600

build_flags =
    -D CONFIG_IDF_TARGET_ESP32=1
    -D CONFIG_RMT_ENABLE=1
    -D CONFIG_RMT_TX_SUPPORT=1
    -D CONFIG_RMT_RX_SUPPORT=1
    -I src



; ──────────────────────────────────────────────────────────────
; Board: ESP32 DOIT DevKit V1
; ──────────────────────────────────────────────────────────────
[env:esp32doit-devkit-v1]
board = esp32doit-devkit-v1
build_flags =
    ${env.build_flags}
    -D DOIT_DEVKIT=1

; ──────────────────────────────────────────────────────────────
; Board: 2.8" TFT (Custom ESP32)
; ──────────────────────────────────────────────────────────────
[env:tft28]
board = esp32dev
build_flags =
    ${env.build_flags}
    -D TFT28_BOARD=1
lib_deps =
    bodmer/TFT_eSPI@^2.5.34
    https://github.com/PaulStoffregen/XPT2046_Touchscreen.git
    lvgl/lvgl@^9.1.0
extra_scripts = pre:scripts/tft28_extra_script.py